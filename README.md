# Yellow Pages
## Architecture
### Server
A rails 5 API server, with a single endpoint - `people/search`. Backed by a SQLite database.
Client files are generated by Webpack from the client directory and served as static files from the public directory.
### Client
A react application, that parse the single input field, and sends a query to the server.
The client is written in es6 syntax, and is traspiled by babel to es5.

## Deployment
### Prerequisites
1. ruby 2.3.1
2. rails 5.0.0.1
3. Sqlite3

### Installation
1. git clone
2. bundle install
3. rails db:create
4. rails db:migrate
5. mkdir db/seeds
6. copy people.json into db/seeds (The seed script expects a json file at `db/seeds/people.json`)
7. rails db:seed

Start with `rails s`

## Notes
### Assumptions - (Answered my own questions from the email)
1. We limit the database query by configuration (2000) in order to reply fast for all possible queries.
2. Server can receive a limit parameter to limit the query below 2000 (if none received, defaults to 100)
3. Client sends search requests with a limit of 150 by default.
4. Server returns the total number of results (up to 2000), so that that client can infer it received only a partial results sets
5. Results are sorted by name.
6. The requirement for a single input field is forcing to introduce some limitations:
  1. 1 or 2 digits are treated as age
  2. 3 and above digits are treated as a partial or whole phone number.
  3. We ignore any other occurrence of age / number after the first so "25 777 30" will result in the query (age=25 and phone contains 777)
  4. Anything that is left after that is treated as the name.
7. I created the API so that it is the client's duty to parse the string, meaning the search methods expect parameters with names (name, age, number). It made more sense to me, because this way we give the client more control over the results, keeping the API simple and straightforward.
8. Phone number search does not ignores hyphens, although it won't be hard to implement such a feature.
9. The client should recognize strings such as "123-45" as phone numbers, which it currently isn't, but that requires only a small change in the regex.

### Potential enhancements
1. As said in the email, pagination is a must in a real world version; I skipped it because it felt out of the scope of the exercise.
2. I added indexes to the columns that are being searched. This improves the search time to an average < 100ms. To further improve this, one option would be to use a database that has stronger text indexing capabilities.
3. For simplicity I skipped configuring this project to production. In order to be production ready:
  1. Add a production database (probably MySQL or PostgreSQL), and set a connection.
  2. Create a minified and uglified version of the bundle.js file.
5. The client is a simple react application, I would’ve added some state management library (e.g Redux, MobX), to handle state better once the app grows.
6. It would probably be easier for a big application to use a gem such as react-rails or react-on-rails and not Webpack to bundle and serve the client's files. Although Webpack has advantages of it’s own (different loaders, ability to hot reload modules in development).
